# 回测统计表修复说明

## 问题
在回测结果页面点击信号记录时，出现 500 错误，原因是 `backtest_statistics` 表尚未创建。

## 已修复
代码已添加异常处理，当统计表不存在时会自动回退到实时计算，不会报错。

## 可选：创建统计表以提升性能

如果你想启用统计表优化（提升 100-500 倍性能），需要运行以下命令：

### 1. 创建统计表
```bash
cd backend
python -m migrations.add_backtest_detailed_tables
```

### 2. 为现有任务填充统计信息（可选）
```bash
python scripts/migrate_backtest_statistics.py
```

## 说明
- **不运行迁移**：系统会使用实时计算（较慢但可用）
- **运行迁移**：系统会使用预计算的统计表（快速）

新回测任务在完成后会自动计算并保存统计信息。
